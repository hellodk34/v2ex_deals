# v2ex_deals
v2ex ä¼˜æƒ ä¿¡æ¯ èŠ‚ç‚¹æ–°å¸–æ¨é€ã€‚**é¢‘é“åç§°ï¼š`v2ex ä¼˜æƒ ä¿¡æ¯ æ–°å¸–æ¨é€`ï¼Œlink: https://t.me/v2ex_deals**

è¿«äºæ€»æ˜¯é”™è¿‡ v2ex ä¸Š `ä¼˜æƒ ä¿¡æ¯` èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œåˆ›å»ºäº†ä¸€ä¸ª `v2ex ä¼˜æƒ ä¿¡æ¯ æ–°å¸–æ¨é€` çš„ telegram channel. æ¬¢è¿å…³æ³¨/è®¢é˜…é¢‘é“ã€‚

preview:

![20210915113558](https://cdn.jsdelivr.net/gh/hellodk34/image@main/img/20210915113558.png)

---

# æ›´æ–°

ä¸Šè¿°ä¼˜æƒ ä¿¡æ¯èŠ‚ç‚¹æ–°å¸–æ¨é€çš„é¢‘é“ä¸ä¼šå—åˆ°å½±å“ã€‚ä¸ªäººä¼šç»´æŠ¤ä¸‹å»ï¼Œä¹Ÿå ç”¨ä¸äº†å¤šå°‘ç³»ç»Ÿèµ„æºï¼ˆè¿è¡Œåœ¨ä¸ªäºº VPS ä¸Šï¼‰ã€‚

æœ¬ç¨‹åºå·²ç»æ›´æ–°æˆå¯ä»¥éƒ¨ç½²ä¸ºä¸ªäººå…³æ³¨çš„èŠ‚ç‚¹æ–°å¸–æ¨é€çš„åç«¯ç¨‹åºã€‚å‰ç«¯åªéœ€è¦

1. åˆ›å»ºä¸€ä¸ª telegram bot
2. è·å– bot çš„ `token`
3. è·å– bot çš„ `chatId`

å¦‚ä½•åˆ›å»º telegram bot è¯·è‡ªè¡Œæœç´¢ï¼ˆæ˜¯å¾ˆç®€å•çš„ï¼‰ã€‚

# é‡è¦æ›´æ–° at 2021-09-18 16:04:56

ç”±äº telegram bot API `sendMessage` æ–¹æ³•è¯·æ±‚é™åˆ¶ï¼šæ¯æ¬¡æœ€å¤§ 4096 ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å¦‚æœç”¨æˆ·å‘çš„å¸–å­æ­£æ–‡å†…å®¹ç‰¹åˆ«å¤šçš„è¯ï¼Œå°±å¾ˆå®¹æ˜“è¶…è¿‡è¿™ä¸ªé™åˆ¶ã€‚è¶…è¿‡é™åˆ¶å‘é€è¯·æ±‚ä¼šå¯¼è‡´ response code 400, bad request, æ‰€ä»¥ä¼šå†æ¬¡æ¨é€ä¸€ä¸ªä¸å¸¦ `content` å­—æ®µçš„ç‰ˆæœ¬ç»™ bot.

è€Œæˆ‘åˆå¸Œæœ›æ¨é€ `content` å­—æ®µï¼Œå› ä¸ºè¿™ä¸ªå­—æ®µå¸®åŠ©ä½ ç›´æ¥é¢„è§ˆå¸–å­æ­£æ–‡ï¼Œåœ¨ telegram ä¸Šç›´æ¥åˆ¤æ–­æ˜¯å¦æœ‰å¿…è¦æ‰“å¼€å¸–å­ã€‚å¦‚æœä½ é¢‘ç¹æ”¶åˆ° `Pushing failed` çš„æç¤ºï¼Œå¯ä»¥è€ƒè™‘æ›´æ”¹ cron è¡¨è¾¾å¼ï¼Œæ”¹æˆæ›´çŸ­çš„æ—¶é—´è¯·æ±‚ä¸€æ¬¡ï¼Œæ¯”å¦‚åŸæ¥æ¯ 30 åˆ†é’Ÿè¯·æ±‚ä¸€æ¬¡ï¼Œç°åœ¨æ”¹æˆæ¯ 10 åˆ†é’Ÿè¯·æ±‚ä¸€æ¬¡ã€‚

ç›®å‰ç¬¬ä¸€æ¬¡æ¨é€å¤±è´¥åæ¨é€çš„æ–‡æ¡ˆå¦‚ä¸‹

> Pushing failed. It maybe caused by too many topics matched or too much content in some topic/post, which exceeds the telegram API request limit.
>
> See API document: https://core.telegram.org/bots/api 
>
> Now push the version without content field.

preview:

![20210918160937](https://cdn.jsdelivr.net/gh/hellodk34/image@main/img/20210918160937.png)

**è¯·ä½¿ç”¨æœ€æ–° jar åŒ…é‡æ–°éƒ¨ç½²**ï¼Œæ–‡ä»¶åï¼š`app-2021-09-18.jar`
## é…ç½®æ–‡ä»¶è¯´æ˜

é…ç½®æ–‡ä»¶çš„åå­—æ˜¯å¯ä»¥éšä¾¿å‘½åçš„ï¼Œæ¯”å¦‚ `config.txt`

```text
# åˆ›å»ºçš„ telegram bot çš„ tokenï¼Œé•¿å¾—åƒè¿™æ ·ï¼Œ`æ•°å­—:å­—æ¯`
token=123456789:abcdEFGhijkLMN

# bot çš„ chatId
chatId=1234567

# cron è¡¨è¾¾å¼ï¼ŒJava(String) ç±»å‹æˆ–è€… Java(Quartz) ç±»å‹ å‚è€ƒç½‘ç«™ https://tool.lu/crontab/
# ä¸‹é¢è¿™æ˜¯æ¯ä¸€åˆ†é’Ÿè¯·æ±‚ä¸€æ¬¡ APIï¼Œæœ‰æ–°å¸–åˆ™æ¨é€ï¼Œæ— åˆ™ä¸æ¨é€
# å»ºè®®æ¯ 10 åˆ†é’Ÿæˆ– 20 åˆ†é’Ÿã€æˆ– 30 åˆ†é’Ÿ è¯·æ±‚ä¸€æ¬¡ ï¼Œå‡å¦‚æ˜¯ 20 åˆ†é’Ÿï¼Œè¿™ä¹ˆå†™ï¼šcron=0 */20 * * * ?
cron=0 */1 * * * ?

# å…³æ³¨çš„èŠ‚ç‚¹åˆ—è¡¨ï¼ŒèŠ‚ç‚¹ code å¯ä»¥é€šè¿‡ `https://www.v2ex.com/api/nodes/s2.json` è·å–ã€‚
# ç”¨è‹±æ–‡é€—å·/åŠè§’é€—å·åˆ†éš”ï¼Œå·²ä½œ trim å¤„ç†ï¼Œé€—å·åå¯æ·»åŠ ç©ºæ ¼ï¼ˆæ›´å®¹æ˜“çœ‹æ¸…æ¥šï¼‰
nodeList=qna, deals, bike, apple
```

## è¿è¡Œæ–¹å¼

```shell script
java -jar /path/to/app.jar --configPath=./config.txt >> ./application.log 2>&1 &
```

tipsï¼š

1. `--configPath=` å³è¾¹çš„å€¼æ—¢å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œæ”¯æŒåœ¨ Windows ä¸‹çš„è·¯å¾„
2. åªæœ‰ 4 ä¸ª key-value pair
3. å¯ä»¥æ ¹æ®å…³æ³¨çš„èŠ‚ç‚¹çƒ­åº¦å’Œæ•°é‡è°ƒæ•´è¯·æ±‚é¢‘ç‡ï¼Œè¯·è‡ªè¡Œè°ƒæ•´ cron è¡¨è¾¾å¼ï¼Œå‡è½» v2ex æœåŠ¡å™¨è´Ÿæ‹… :)ã€‚æ¯”å¦‚ `é—®ä¸ç­”` `Apple` `iPhone` éƒ½æ˜¯çƒ­é—¨èŠ‚ç‚¹
4. é…ç½®æ–‡ä»¶æ”¯æŒä»¥ # å¼€å¤´çš„æ³¨é‡Š
5. ç”±äºä½ æ‡‚ğŸ‰ï¸ï¸çš„åŸå› ï¼ŒV ç«™è¢«å¢™ï¼Œå»ºè®®è¿è¡Œåœ¨éå¤§é™†çš„æœåŠ¡å™¨ä¸Š
6. ç”±äºè·å–çš„æ˜¯ V ç«™é¦–é¡µ `å…¨éƒ¨` tab ä¸‹çš„å¸–å­ä¿¡æ¯ï¼Œæ•…è€Œä¸å¯èƒ½å‡ºç°åœ¨æ­¤ tab ä¸‹çš„å¸–å­å°±ä¸å¯èƒ½è¢«æ¨é€ï¼Œæ¯”å¦‚ `äºŒæ‰‹äº¤æ˜“`ã€`æ°´æ·±ç«çƒ­`

> é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ª IP æ¯å°æ—¶å¯ä»¥å‘èµ·çš„ API è¯·æ±‚æ•°è¢«é™åˆ¶åœ¨ 120 æ¬¡ã€‚

[V2EX API æ¥å£](https://www.v2ex.com/p/7v9TEc53)

## Preview

![20210916170056](https://cdn.jsdelivr.net/gh/hellodk34/image@main/img/20210916170056.png)
![20210916170223](https://cdn.jsdelivr.net/gh/hellodk34/image@main/img/20210916170223.png)

é¡¹ç›®è¿˜æœ‰ä¸å®Œå–„çš„åœ°æ–¹ï¼Œå¦‚æœä½ æœ‰å…´è¶£ï¼Œæ¬¢è¿ fork æäº¤ mr/pr æäº¤ä½ çš„è´¡çŒ®ï¼Œä¸€èµ·æ¥å®Œå–„è¿™ä¸ªæœ‰è¶£çš„é¡¹ç›®å§~

æœ€åï¼Œæ±‚ä¸ª star â­ï¸ï¸
